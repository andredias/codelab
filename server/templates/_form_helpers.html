{% macro render_field(field) %}
    {{ field.label }}
    {% if field.flags.required -%}
        <sup class="required_field">*</sup>
        {% do kwargs.update(dict(required='required')) %}
    {%- endif %}
    <div>{{ field(**kwargs)|safe }}</div>
    {% if field.errors %}
    <ul class="error">
        {% for error in field.errors %}
        <li>{{ error }}</li>
        {% endfor %}
    </ul>
    {% endif %}
{% endmacro %}